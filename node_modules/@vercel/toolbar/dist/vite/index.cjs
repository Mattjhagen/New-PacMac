"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }var _chunkJW2XU7VNcjs = require('../chunk-JW2XU7VN.cjs');var _chunkB2MWXBE6cjs = require('../chunk-B2MWXBE6.cjs');var _chunkN32LB23Ccjs = require('../chunk-N32LB23C.cjs');var o,i;function l(e){typeof window>"u"||typeof EventSource>"u"||!e||i||(i=e,o=new EventSource(`${e}/events`),f(),window.addEventListener("vercel-toolbar-ready",()=>{f()}))}function f(){let e=_chunkB2MWXBE6cjs.b.call(void 0, );_optionalChain([e, 'optionalAccess', _ => _.isAuthenticated])&&_optionalChain([e, 'access', _2 => _2.setLocalhostEventSource, 'optionalCall', _3 => _3({subscribe:s,fetchLocal:v})])}function s(e,n){if(!o)return()=>{};let r=t=>{try{let a=t.data&&typeof t.data=="string"?JSON.parse(t.data):void 0;a&&n(a)}catch (e2){}};return o.addEventListener(e,r),()=>{_optionalChain([o, 'optionalAccess', _4 => _4.removeEventListener, 'call', _5 => _5(e,r)])}}async function v(e,n){if(!i)return{error:"No toolbar server"};try{let r=await fetch(`${i}${e}`,n?{method:"POST",body:JSON.stringify(n)}:void 0),t=await r.json();return r.ok?{result:t}:{error:t.error}}catch(r){return{error:`${r}`}}}function m(){s("branch-change",e=>{e&&location.reload()})}function S({nonce:e}={}){let n=_chunkJW2XU7VNcjs.a.call(void 0, {branch:import.meta.env.VERCEL_TOOLBAR_BRANCH,ownerId:import.meta.env.VERCEL_TOOLBAR_OWNER_ID,projectId:import.meta.env.VERCEL_TOOLBAR_PROJECT_ID,deploymentId:import.meta.env.VERCEL_TOOLBAR_DEPLOYMENT_ID,nonce:e});return import.meta.env.DEV&&(_chunkN32LB23Ccjs.c.call(void 0, )?p():console.log(`
      You are rendering the Vercel Toolbar in development, but the configuration is missing.
      Make sure the plugin is added to the Vite config and the project has been linked using \`vercel link\`.
      For more details, visit https://vercel.com/docs/workflow-collaboration/vercel-toolbar/in-production-and-localhost/add-to-localhost
      `.trim())),n}function p(){l(import.meta.env.VERCEL_TOOLBAR_SERVER),m()}exports.mountVercelToolbar = S;
